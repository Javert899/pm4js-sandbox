<html>
	<head>
		<script src="scripts/generic/jquery.min.js"></script>
		<script src="scripts/generic/download-utility.js"></script>
		<script src="scripts/pm4js/eventLog.js"></script>
		<script src="scripts/pm4js/xesParser.js"></script>
		<script src="scripts/pm4js/xesExporter.js"></script>
		<script src="scripts/pm4js/log-statistics.js"></script>
		<script src="scripts/pm4js/dfg.js"></script>
		<script src="scripts/generic/mxClient.min.js"></script>
		<script src="logs/example-jsonocel.js"></script>
		<script src="scripts/ocel/eventsView.js"></script>
		<script src="scripts/ocel/objectsView.js"></script>
		<script src="scripts/ocel/edgesView.js"></script>
		<script src="scripts/ocel/ocdfg-model.js"></script>
		<script src="scripts/ocel/ocdfg-visualization.js"></script>
		<script src="scripts/ocel/xmlocel-exporter.js"></script>
		<script src="scripts/ocel/xmlocel-importer.js"></script>
		<script src="scripts/ocel/ocel-flattening.js"></script>
	</head>
	<body>
		<div id="header">
			Annotation:
			<select id="annotationSelector">
				<option id="events" value="0">Events</option>
				<option id="unique_objects" value="1" selected>Unique Objects</option>
				<option id="total_objects" value="2">Total Objects</option>
			</select>
			% act.: <input id="af_slider" type="range" min="0" max="100" value="70" class="slider">
			% paths: <input id="pf_slider" type="range" min="0" max="100" value="70" class="slider">
			<button id="apply_changes" onclick="applyChanges()">Apply Changes</button>
		</div>
		<div id="graphContainer">
		</div>
		<script type="text/javascript">
			let model = new OcdfgModel(eventLog);
			let visualization = new OcdfgVisualization(model, "graphContainer");
			
			function applyChanges() {
				let af = document.getElementById("af_slider").value / 100.0;
				let pf = document.getElementById("pf_slider").value / 100.0;
				let annotation = parseInt(document.getElementById("annotationSelector").value);
				visualization.ACTIVITY_FREQUENCY = af;
				visualization.PATHS_FREQUENCY = pf;
				visualization.IDX = annotation;
				visualization.represent();
			}
			
			applyChanges();
			
			/*$.get('logs/log.xmlocel', function(data) {
				let ocel = XmlOcelImporter.importLog(data);
				console.log(ocel);
				let log = OcelFlattening.flatten(ocel, "DOCTYPE_Order");
				console.log(log);
			});*/
			
			//let xmlStri = XmlOcelExporter.exportLog(model.ocel);
			//download(xmlStri, "prova.xmlocel", "text/xml");
			

			//console.log(xmlStri);
			//console.log(new Date().getTime());
			//let log = null;
			//$.get('logs/receipt.xes', function(data) {
			//	console.log("parsing");
			//	log = XesParser.parse(data);
			//	console.log(log);
			//	let aa = (new Date()).getTime();
			//	let sa = LogStatistics.getStartActivities(log);
			//	let ea = LogStatistics.getEndActivities(log);
			//	let att = LogStatistics.getAttributeValues(log, "concept:name");
			//	let vars = LogStatistics.getVariants(log);
			//	let bb = (new Date()).getTime();
			//	let aa = (new Date()).getTime();
			//	let dfg = new Dfg(log);
				//let fdfg = dfg.calculateFrequencyDfg();
			//	let pdfg = dfg.calculatePerformanceDfg();
			//	let bb = (new Date()).getTime();
			//	console.log((bb-aa)/1000.0);
			//	console.log(pdfg);
				//console.log(pdfg);
			//});
		</script>
	</body>
</html>